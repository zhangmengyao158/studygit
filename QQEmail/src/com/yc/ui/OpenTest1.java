package com.yc.ui;

import java.sql.*;
import java.io.*;
import java.lang.*;
import java.awt.*;
public class OpenTest1{
public static void main(String args[]){
	try{
		Class.forName("oracle.jdbc.driver.OracleDriver");
		Connection con = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl","email","a");
		Statement stmt=con.createStatement();
		ResultSet rs;
		String sql="select NewFile from files where filesid=305";
		rs=stmt.executeQuery(sql);
		
		while(rs.next()){
			
			InputStream image = rs.getBinaryStream("NewFile");                                          
                                                           //photoimg为image类型,取方法为getBinaryStream();
			String len=image.toString();
			long length=len.length();
			int ch = 0;
			byte[] buffer = new byte[(int)length/7];          //定义 buffer为缓冲区每次读取内容的长度
			File file = new File("c:\\test.txt");//将数据写入文件
			if(!file.exists()){
				file.createNewFile();
			}
			try{
				//Runtime.getRuntime().exec("D:/软件/plsqldev.exe");
				Runtime.getRuntime().exec("cmd /c start c:\\test.txt");
			}catch(Exception e){
				System.out.println("error");
			}
			FileOutputStream newFile = new FileOutputStream(file,true);
			
			
			InputStream in = new FileInputStream(file);
			//
			byte [] bt = new byte[(int)file.length()];
			in.read(bt);//
//			String c = new String(bt);
		//	System.out.println(c);
			in.close();
			System.out.println(newFile);////流
			System.out.println(file);
			
			
			boolean go = true;
			while(go){
				while((ch = image.read(buffer))!=-1){
					newFile.write(buffer);
					
				}
				go=false;
			}
		}
	}catch(Exception e){
		System.out.print(e);
	}
	}
}